<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create a grouped time series — gts • hts</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">hts</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create a grouped time series</h1>
    </div>

    
    <p>Method for creating grouped time series.</p>
    

    <pre class="usage"><span class='fu'>gts</span>(<span class='no'>y</span>, <span class='no'>groups</span>, <span class='kw'>gnames</span> <span class='kw'>=</span> <span class='fu'>rownames</span>(<span class='no'>groups</span>), <span class='no'>characters</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>y</th>
      <td><p>A matrix or multivariate time series contains the bottom level
series.</p></td>
    </tr>
    <tr>
      <th>groups</th>
      <td><p>Group matrix indicates the group structure, with one column
for each series when completely disaggregated, and one row for each grouping
of the time series. It allows either a numerical matrix or a matrix
consisting of strings that can be used for labelling. If the argument
<code>characters</code> is used, then <code>groups</code> will be automatically
generated within the function.</p></td>
    </tr>
    <tr>
      <th>gnames</th>
      <td><p>Specify the group names.</p></td>
    </tr>
    <tr>
      <th>characters</th>
      <td><p>A vector of integers, or a list containing vectors of
integers, indicating the segments in which bottom level names can be read in
order to construct the corresponding grouping matrix and its labels. A
<code>list</code> class is used when a grouped time series includes one or more
hierarchies. For example, a grouped time series may involve a geographical
grouping and a product grouping, with each of them associated with a 2-level
hierarchy. In this situation, a bottom level name such as "VICMelbAB" would
indicate the state "VIC" (3 characters) followed by the city "Melb" (4
characters), then the product category "A" (1 character) followed by the
sub-product category "B" (1 character). In this example, the specification
of <code>characters</code> is <code>list(c(3, 4), c(1, 1))</code>, where the first
element <code>c(3, 4)</code> corresponds to the geographical hierarchy and the
second element corresponds to the product hierarchy.  In the special case
where there is a non-hierarchical grouped time series, a vector of integers
is also possible. For example, a grouped time series may involve state, age
and sex grouping variables. In this situation, a bottom level name such as
"VIC1F" would indicate the state "VIC", age group "1" and sex "F". Because
none of these is hierarchical, we could specify <code>characters = list(3,
1, 1)</code>, or as a simple numeric vector: <code>characters = c(3, 1, 1)</code>. This
implies its non-hierarchical structure and its characters segments. Again,
all bottom level names must be of the same length. Currently, the use of
<code>characters</code> only supports 2-way cross-products for grouping variables.
Specifying <code>groups</code> is more general (but more complicated), as any
combination of grouping variables can be used.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    

<dt>bts</dt><dd><p>Multivariate time series contains the bottom level
series</p></dd> <dt>groups</dt><dd><p>Information about the groups of a grouped time series</p></dd>
<dt>labels</dt><dd><p>Information about the labels that are used for plotting.</p></dd>

    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>R. J. Hyndman, R. A. Ahmed, G. Athanasopoulos and H.L. Shang
(2011) Optimal combination forecasts for hierarchical time series.
<em>Computational Statistics and Data Analysis</em>, <b>55</b>(9), 2579--2589.
<a href = 'http://robjhyndman.com/papers/hierarchical/'>http://robjhyndman.com/papers/hierarchical/</a></p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='hts.html'>hts</a></code>, <code><a href='accuracy.gts.html'>accuracy.gts</a></code>,
<code><a href='forecast.gts.html'>forecast.gts</a></code>, <code><a href='plot.gts.html'>plot.gts</a></code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'># Example 1 illustrating the usage of the "groups" argument</span>
<span class='no'>abc</span> <span class='kw'>&lt;-</span> <span class='fu'>ts</span>(<span class='fl'>5</span> + <span class='fu'>matrix</span>(<span class='fu'>sort</span>(<span class='fu'>rnorm</span>(<span class='fl'>1600</span>)), <span class='kw'>ncol</span> <span class='kw'>=</span> <span class='fl'>16</span>, <span class='kw'>nrow</span> <span class='kw'>=</span> <span class='fl'>100</span>))
<span class='no'>sex</span> <span class='kw'>&lt;-</span> <span class='fu'>rep</span>(<span class='fu'>c</span>(<span class='st'>"female"</span>, <span class='st'>"male"</span>), <span class='kw'>each</span> <span class='kw'>=</span> <span class='fl'>8</span>)
<span class='no'>state</span> <span class='kw'>&lt;-</span> <span class='fu'>rep</span>(<span class='fu'>c</span>(<span class='st'>"NSW"</span>, <span class='st'>"VIC"</span>, <span class='st'>"QLD"</span>, <span class='st'>"SA"</span>, <span class='st'>"WA"</span>, <span class='st'>"NT"</span>, <span class='st'>"ACT"</span>, <span class='st'>"TAS"</span>), <span class='fl'>2</span>)
<span class='no'>gc</span> <span class='kw'>&lt;-</span> <span class='fu'>rbind</span>(<span class='no'>sex</span>, <span class='no'>state</span>)  <span class='co'># a matrix consists of strings.</span>
<span class='no'>gn</span> <span class='kw'>&lt;-</span> <span class='fu'>rbind</span>(<span class='fu'>rep</span>(<span class='fl'>1</span>:<span class='fl'>2</span>, <span class='kw'>each</span> <span class='kw'>=</span> <span class='fl'>8</span>), <span class='fu'>rep</span>(<span class='fl'>1</span>:<span class='fl'>8</span>, <span class='fl'>2</span>))  <span class='co'># a numerical matrix</span>
<span class='fu'>rownames</span>(<span class='no'>gc</span>) <span class='kw'>&lt;-</span> <span class='fu'>rownames</span>(<span class='no'>gn</span>) <span class='kw'>&lt;-</span> <span class='fu'>c</span>(<span class='st'>"Sex"</span>, <span class='st'>"State"</span>)
<span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='fu'>gts</span>(<span class='no'>abc</span>, <span class='kw'>groups</span> <span class='kw'>=</span> <span class='no'>gc</span>)
<span class='no'>y</span> <span class='kw'>&lt;-</span> <span class='fu'>gts</span>(<span class='no'>abc</span>, <span class='kw'>groups</span> <span class='kw'>=</span> <span class='no'>gn</span>)

<span class='co'># Example 2 with two simple hierarchies (geography and product) to show the argument "characters"</span>
<span class='no'>bnames1</span> <span class='kw'>&lt;-</span> <span class='fu'>c</span>(<span class='st'>"VICMelbAA"</span>, <span class='st'>"VICMelbAB"</span>, <span class='st'>"VICGeelAA"</span>, <span class='st'>"VICGeelAB"</span>,
             <span class='st'>"VICMelbBA"</span>, <span class='st'>"VICMelbBB"</span>, <span class='st'>"VICGeelBA"</span>, <span class='st'>"VICGeelBB"</span>,
             <span class='st'>"NSWSyndAA"</span>, <span class='st'>"NSWSyndAB"</span>, <span class='st'>"NSWWollAA"</span>, <span class='st'>"NSWWollAB"</span>,
             <span class='st'>"NSWSyndBA"</span>, <span class='st'>"NSWSyndBB"</span>, <span class='st'>"NSWWollBA"</span>, <span class='st'>"NSWWollBB"</span>)
<span class='no'>bts1</span> <span class='kw'>&lt;-</span> <span class='fu'>matrix</span>(<span class='fu'>ts</span>(<span class='fu'>rnorm</span>(<span class='fl'>160</span>)), <span class='kw'>ncol</span> <span class='kw'>=</span> <span class='fl'>16</span>)
<span class='fu'>colnames</span>(<span class='no'>bts1</span>) <span class='kw'>&lt;-</span> <span class='no'>bnames1</span>
<span class='no'>x1</span> <span class='kw'>&lt;-</span> <span class='fu'>gts</span>(<span class='no'>bts1</span>, <span class='kw'>characters</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='fu'>c</span>(<span class='fl'>3</span>, <span class='fl'>4</span>), <span class='fu'>c</span>(<span class='fl'>1</span>, <span class='fl'>1</span>)))</div><div class='output co'>#&gt; <span class='message'>Argument gnames is missing and the default labels are used.</span></div><div class='input'>
<span class='co'># Example 3 with a non-hierarchical grouped time series of 3 grouping variables (state, age and sex)</span>
<span class='no'>bnames2</span> <span class='kw'>&lt;-</span> <span class='fu'>c</span>(<span class='st'>"VIC1F"</span>, <span class='st'>"VIC1M"</span>, <span class='st'>"VIC2F"</span>, <span class='st'>"VIC2M"</span>, <span class='st'>"VIC3F"</span>, <span class='st'>"VIC3M"</span>,
             <span class='st'>"NSW1F"</span>, <span class='st'>"NSW1M"</span>, <span class='st'>"NSW2F"</span>, <span class='st'>"NSW2M"</span>, <span class='st'>"NSW3F"</span>, <span class='st'>"NSW3M"</span>)
<span class='no'>bts2</span> <span class='kw'>&lt;-</span> <span class='fu'>matrix</span>(<span class='fu'>ts</span>(<span class='fu'>rnorm</span>(<span class='fl'>120</span>)), <span class='kw'>ncol</span> <span class='kw'>=</span> <span class='fl'>12</span>)
<span class='fu'>colnames</span>(<span class='no'>bts2</span>) <span class='kw'>&lt;-</span> <span class='no'>bnames2</span>
<span class='no'>x2</span> <span class='kw'>&lt;-</span> <span class='fu'>gts</span>(<span class='no'>bts2</span>, <span class='kw'>characters</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>3</span>, <span class='fl'>1</span>, <span class='fl'>1</span>))</div><div class='output co'>#&gt; <span class='message'>Argument gnames is missing and the default labels are used.</span></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#references">References</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Earo Wang and Rob J Hyndman

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Rob Hyndman, Alan Lee, Earo Wang.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
