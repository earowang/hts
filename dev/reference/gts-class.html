<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create a grouped time series — gts • hts</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Create a grouped time series — gts" />
<meta property="og:description" content="Method for creating grouped time series." />
<meta property="og:image" content="/logo.png" />


<meta name="robots" content="noindex">

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">hts</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">6.0.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="https://CRAN.R-project.org/package=hts/vignettes/hts.pdf">Vignettes</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/earowang/hts/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create a grouped time series</h1>
    <small class="dont-index">Source: <a href='https://github.com/earowang/hts/blob/master/R/gts.R'><code>R/gts.R</code></a></small>
    <div class="hidden name"><code>gts-class.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Method for creating grouped time series.</p>
    </div>

    <pre class="usage"><span class='fu'>gts</span>(<span class='no'>y</span>, <span class='no'>groups</span>, <span class='kw'>gnames</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>rownames</a></span>(<span class='no'>groups</span>), <span class='no'>characters</span>)

<span class='fu'>is.gts</span>(<span class='no'>xts</span>)

<span class='co'># S3 method for gts</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span>(<span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for gts</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span>(<span class='no'>object</span>, <span class='no'>...</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>y</th>
      <td><p>A matrix or multivariate time series contains the bottom level
series.</p></td>
    </tr>
    <tr>
      <th>groups</th>
      <td><p>Group matrix indicates the group structure, with one column
for each series when completely disaggregated, and one row for each grouping
of the time series. It allows either a numerical matrix or a matrix
consisting of strings that can be used for labelling. If the argument
<code>characters</code> is used, then <code>groups</code> will be automatically
generated within the function.</p></td>
    </tr>
    <tr>
      <th>gnames</th>
      <td><p>Specify the group names.</p></td>
    </tr>
    <tr>
      <th>characters</th>
      <td><p>A vector of integers, or a list containing vectors of
integers, indicating the segments in which bottom level names can be read in
order to construct the corresponding grouping matrix and its labels. A
<code>list</code> class is used when a grouped time series includes one or more
hierarchies. For example, a grouped time series may involve a geographical
grouping and a product grouping, with each of them associated with a 2-level
hierarchy. In this situation, a bottom level name such as "VICMelbAB" would
indicate the state "VIC" (3 characters) followed by the city "Melb" (4
characters), then the product category "A" (1 character) followed by the
sub-product category "B" (1 character). In this example, the specification
of <code>characters</code> is <code><a href='https://rdrr.io/r/base/list.html'>list(c(3, 4), c(1, 1))</a></code>, where the first
element <code><a href='https://rdrr.io/r/base/c.html'>c(3, 4)</a></code> corresponds to the geographical hierarchy and the
second element corresponds to the product hierarchy.  In the special case
where there is a non-hierarchical grouped time series, a vector of integers
is also possible. For example, a grouped time series may involve state, age
and sex grouping variables. In this situation, a bottom level name such as
"VIC1F" would indicate the state "VIC", age group "1" and sex "F". Because
none of these is hierarchical, we could specify <code>characters = list(3,
1, 1)</code>, or as a simple numeric vector: <code>characters = c(3, 1, 1)</code>. This
implies its non-hierarchical structure and its characters segments. Again,
all bottom level names must be of the same length. Currently, the use of
<code>characters</code> only supports 2-way cross-products for grouping variables.
Specifying <code>groups</code> is more general (but more complicated), as any
combination of grouping variables can be used.</p></td>
    </tr>
    <tr>
      <th>xts</th>
      <td><p><code>gts</code> object.</p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p><code>gts</code> object.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Extra arguments passed to <code>print</code> and <code>summary</code>.</p></td>
    </tr>
    <tr>
      <th>object</th>
      <td><p><code>gts</code> object.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    

<dt>bts</dt><dd><p>Multivariate time series contains the bottom level
series</p></dd> <dt>groups</dt><dd><p>Information about the groups of a grouped time series</p></dd>
<dt>labels</dt><dd><p>Information about the labels that are used for plotting.</p></dd>

    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Hyndman, R. J., Ahmed, R. A., Athanasopoulos, G., &amp; Shang, H. L.
(2011). Optimal combination forecasts for hierarchical time series.
<em>Computational Statistics and Data Analysis</em>, <b>55</b>(9), 2579--2589.
<a href='https://robjhyndman.com/publications/hierarchical/'>https://robjhyndman.com/publications/hierarchical/</a></p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='hts-class.html'>hts</a></code>, <code><a href='accuracy.gts.html'>accuracy.gts</a></code>,
<code><a href='forecast.gts.html'>forecast.gts</a></code>, <code><a href='plot.gts.html'>plot.gts</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'># Example 1 illustrating the usage of the "groups" argument</span>
<span class='no'>abc</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/ts.html'>ts</a></span>(<span class='fl'>5</span> + <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span>(<span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span>(<span class='fl'>1600</span>)), <span class='kw'>ncol</span> <span class='kw'>=</span> <span class='fl'>16</span>, <span class='kw'>nrow</span> <span class='kw'>=</span> <span class='fl'>100</span>))
<span class='no'>sex</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"female"</span>, <span class='st'>"male"</span>), <span class='kw'>each</span> <span class='kw'>=</span> <span class='fl'>8</span>)
<span class='no'>state</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"NSW"</span>, <span class='st'>"VIC"</span>, <span class='st'>"QLD"</span>, <span class='st'>"SA"</span>, <span class='st'>"WA"</span>, <span class='st'>"NT"</span>, <span class='st'>"ACT"</span>, <span class='st'>"TAS"</span>), <span class='fl'>2</span>)
<span class='no'>gc</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>rbind</a></span>(<span class='no'>sex</span>, <span class='no'>state</span>)  <span class='co'># a matrix consists of strings.</span>
<span class='no'>gn</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>rbind</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='fl'>1</span>:<span class='fl'>2</span>, <span class='kw'>each</span> <span class='kw'>=</span> <span class='fl'>8</span>), <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='fl'>1</span>:<span class='fl'>8</span>, <span class='fl'>2</span>))  <span class='co'># a numerical matrix</span>
<span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>rownames</a></span>(<span class='no'>gc</span>) <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>rownames</a></span>(<span class='no'>gn</span>) <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"Sex"</span>, <span class='st'>"State"</span>)
<span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='fu'>gts</span>(<span class='no'>abc</span>, <span class='kw'>groups</span> <span class='kw'>=</span> <span class='no'>gc</span>)
<span class='no'>y</span> <span class='kw'>&lt;-</span> <span class='fu'>gts</span>(<span class='no'>abc</span>, <span class='kw'>groups</span> <span class='kw'>=</span> <span class='no'>gn</span>)

<span class='co'># Example 2 with two simple hierarchies (geography and product) to show the argument "characters"</span>
<span class='no'>bnames1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"VICMelbAA"</span>, <span class='st'>"VICMelbAB"</span>, <span class='st'>"VICGeelAA"</span>, <span class='st'>"VICGeelAB"</span>,
             <span class='st'>"VICMelbBA"</span>, <span class='st'>"VICMelbBB"</span>, <span class='st'>"VICGeelBA"</span>, <span class='st'>"VICGeelBB"</span>,
             <span class='st'>"NSWSyndAA"</span>, <span class='st'>"NSWSyndAB"</span>, <span class='st'>"NSWWollAA"</span>, <span class='st'>"NSWWollAB"</span>,
             <span class='st'>"NSWSyndBA"</span>, <span class='st'>"NSWSyndBB"</span>, <span class='st'>"NSWWollBA"</span>, <span class='st'>"NSWWollBB"</span>)
<span class='no'>bts1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span>(<span class='fu'><a href='https://rdrr.io/r/stats/ts.html'>ts</a></span>(<span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span>(<span class='fl'>160</span>)), <span class='kw'>ncol</span> <span class='kw'>=</span> <span class='fl'>16</span>)
<span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span>(<span class='no'>bts1</span>) <span class='kw'>&lt;-</span> <span class='no'>bnames1</span>
<span class='no'>x1</span> <span class='kw'>&lt;-</span> <span class='fu'>gts</span>(<span class='no'>bts1</span>, <span class='kw'>characters</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>3</span>, <span class='fl'>4</span>), <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>, <span class='fl'>1</span>)))</div><div class='output co'>#&gt; <span class='message'>Argument gnames is missing and the default labels are used.</span></div><div class='input'>
<span class='co'># Example 3 with a non-hierarchical grouped time series of 3 grouping variables (state, age and sex)</span>
<span class='no'>bnames2</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"VIC1F"</span>, <span class='st'>"VIC1M"</span>, <span class='st'>"VIC2F"</span>, <span class='st'>"VIC2M"</span>, <span class='st'>"VIC3F"</span>, <span class='st'>"VIC3M"</span>,
             <span class='st'>"NSW1F"</span>, <span class='st'>"NSW1M"</span>, <span class='st'>"NSW2F"</span>, <span class='st'>"NSW2M"</span>, <span class='st'>"NSW3F"</span>, <span class='st'>"NSW3M"</span>)
<span class='no'>bts2</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span>(<span class='fu'><a href='https://rdrr.io/r/stats/ts.html'>ts</a></span>(<span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span>(<span class='fl'>120</span>)), <span class='kw'>ncol</span> <span class='kw'>=</span> <span class='fl'>12</span>)
<span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span>(<span class='no'>bts2</span>) <span class='kw'>&lt;-</span> <span class='no'>bnames2</span>
<span class='no'>x2</span> <span class='kw'>&lt;-</span> <span class='fu'>gts</span>(<span class='no'>bts2</span>, <span class='kw'>characters</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>3</span>, <span class='fl'>1</span>, <span class='fl'>1</span>))</div><div class='output co'>#&gt; <span class='message'>Argument gnames is missing and the default labels are used.</span></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='http://robjhyndman.com'>Rob Hyndman</a>, Alan Lee, <a href='http://earo.me'>Earo Wang</a>, Shanika Wickramasuriya.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


